{"ast":null,"code":"import _slicedToArray from\"/home/luiza/Desktop/Driven/projeto_13_my-wallet/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useContext}from\"react\";import{Container,Statement,Total}from\"./style\";import Top from\"../Top\";import Menu from\"../Menu\";import Money from\"../Money\";import UserContext from\"../../contexts/UserContext\";import{getTransaction}from\"../../services/mywallet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function HomePage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useContext=useContext(UserContext),user=_useContext.user;var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),userTotal=_useState4[0],setUserTotal=_useState4[1];var config={headers:{Authorization:\"Bearer \".concat(user.token)}};useEffect(function(){renderHomePage();},[]);useEffect(mathTotal,[formData]);function renderHomePage(){var promise=getTransaction(config);promise.then(function(response){setFormData(response.data);});}function mathTotal(){var totalDeposit=0;var totalWithdraw=0;for(var i=0;i<formData.length;i++){if(formData[i].type===\"deposit\"){var depositValue=formData[i].value;totalDeposit+=parseFloat(depositValue);}else{var withdrawValue=formData[i].value;totalWithdraw+=parseFloat(withdrawValue);}setUserTotal((totalDeposit-totalWithdraw).toFixed(2));}}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Top,{}),/*#__PURE__*/_jsxs(Statement,{children:[formData.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"center\",children:/*#__PURE__*/_jsx(\"span\",{children:\"N\\xE3o h\\xE1 registros de entrada ou sa\\xEDda\"})}):formData.map(function(r,i){return/*#__PURE__*/_jsx(Money,{money:r},i);}),/*#__PURE__*/_jsxs(Total,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Saldo\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:userTotal>=0?\"green\":\"red\",children:userTotal})]})]}),/*#__PURE__*/_jsx(Menu,{})]})});}","map":{"version":3,"sources":["/home/luiza/Desktop/Driven/projeto_13_my-wallet/front/src/components/HomePage/index.js"],"names":["useState","useEffect","useContext","Container","Statement","Total","Top","Menu","Money","UserContext","getTransaction","HomePage","formData","setFormData","user","userTotal","setUserTotal","config","headers","Authorization","token","renderHomePage","mathTotal","promise","then","response","data","totalDeposit","totalWithdraw","i","length","type","depositValue","value","parseFloat","withdrawValue","toFixed","map","r"],"mappings":"2IAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,OAASC,SAAT,CAAoBC,SAApB,CAA+BC,KAA/B,KAA4C,SAA5C,CACA,MAAOC,CAAAA,GAAP,KAAgB,QAAhB,CACA,MAAOC,CAAAA,IAAP,KAAiB,SAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,UAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,OAASC,cAAT,KAA+B,yBAA/B,C,6IAEA,cAAe,SAASC,CAAAA,QAAT,EAAoB,CACjC,cAAgCX,QAAQ,CAAC,EAAD,CAAxC,wCAAOY,QAAP,eAAiBC,WAAjB,eACA,gBAAiBX,UAAU,CAACO,WAAD,CAA3B,CAAQK,IAAR,aAAQA,IAAR,CACA,eAAkCd,QAAQ,CAAC,CAAD,CAA1C,yCAAOe,SAAP,eAAkBC,YAAlB,eACA,GAAMC,CAAAA,MAAM,CAAG,CAAEC,OAAO,CAAE,CAAEC,aAAa,kBAAYL,IAAI,CAACM,KAAjB,CAAf,CAAX,CAAf,CAEAnB,SAAS,CAAC,UAAM,CACdoB,cAAc,GACf,CAFQ,CAEN,EAFM,CAAT,CAIApB,SAAS,CAACqB,SAAD,CAAY,CAACV,QAAD,CAAZ,CAAT,CAEA,QAASS,CAAAA,cAAT,EAA0B,CACxB,GAAME,CAAAA,OAAO,CAAGb,cAAc,CAACO,MAAD,CAA9B,CACAM,OAAO,CAACC,IAAR,CAAa,SAACC,QAAD,CAAc,CACzBZ,WAAW,CAACY,QAAQ,CAACC,IAAV,CAAX,CACD,CAFD,EAGD,CACD,QAASJ,CAAAA,SAAT,EAAqB,CACnB,GAAIK,CAAAA,YAAY,CAAG,CAAnB,CACA,GAAIC,CAAAA,aAAa,CAAG,CAApB,CAEA,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGjB,QAAQ,CAACkB,MAA7B,CAAqCD,CAAC,EAAtC,CAA0C,CACxC,GAAIjB,QAAQ,CAACiB,CAAD,CAAR,CAAYE,IAAZ,GAAqB,SAAzB,CAAoC,CAClC,GAAMC,CAAAA,YAAY,CAAGpB,QAAQ,CAACiB,CAAD,CAAR,CAAYI,KAAjC,CACAN,YAAY,EAAIO,UAAU,CAACF,YAAD,CAA1B,CACD,CAHD,IAGO,CACL,GAAMG,CAAAA,aAAa,CAAGvB,QAAQ,CAACiB,CAAD,CAAR,CAAYI,KAAlC,CACAL,aAAa,EAAIM,UAAU,CAACC,aAAD,CAA3B,CACD,CACDnB,YAAY,CAAC,CAACW,YAAY,CAAGC,aAAhB,EAA+BQ,OAA/B,CAAuC,CAAvC,CAAD,CAAZ,CACD,CACF,CACD,mBACE,sCACE,MAAC,SAAD,yBACE,KAAC,GAAD,IADF,cAEE,MAAC,SAAD,YACGxB,QAAQ,CAACkB,MAAT,GAAoB,CAApB,cACC,YAAK,SAAS,CAAC,QAAf,uBACE,uEADF,EADD,CAKClB,QAAQ,CAACyB,GAAT,CAAa,SAACC,CAAD,CAAIT,CAAJ,qBAAU,KAAC,KAAD,EAAO,KAAK,CAAES,CAAd,EAAsBT,CAAtB,CAAV,EAAb,CANJ,cAQE,MAAC,KAAD,yBACE,4BADF,CACe,GADf,cAEE,aAAM,SAAS,CAAEd,SAAS,EAAI,CAAb,CAAiB,OAAjB,CAA2B,KAA5C,UACGA,SADH,EAFF,GARF,GAFF,cAiBE,KAAC,IAAD,IAjBF,GADF,EADF,CAuBD","sourcesContent":["import { useState, useEffect, useContext } from \"react\";\nimport { Container, Statement, Total } from \"./style\";\nimport Top from \"../Top\";\nimport Menu from \"../Menu\";\nimport Money from \"../Money\";\nimport UserContext from \"../../contexts/UserContext\";\nimport { getTransaction } from \"../../services/mywallet\";\n\nexport default function HomePage() {\n  const [formData, setFormData] = useState([]);\n  const { user } = useContext(UserContext);\n  const [userTotal, setUserTotal] = useState(0);\n  const config = { headers: { Authorization: `Bearer ${user.token}` } };\n\n  useEffect(() => {\n    renderHomePage();\n  }, []);\n\n  useEffect(mathTotal, [formData]);\n\n  function renderHomePage() {\n    const promise = getTransaction(config);\n    promise.then((response) => {\n      setFormData(response.data);\n    });\n  }\n  function mathTotal() {\n    let totalDeposit = 0;\n    let totalWithdraw = 0;\n\n    for (let i = 0; i < formData.length; i++) {\n      if (formData[i].type === \"deposit\") {\n        const depositValue = formData[i].value;\n        totalDeposit += parseFloat(depositValue);\n      } else {\n        const withdrawValue = formData[i].value;\n        totalWithdraw += parseFloat(withdrawValue);\n      }\n      setUserTotal((totalDeposit - totalWithdraw).toFixed(2));\n    }\n  }\n  return (\n    <>\n      <Container>\n        <Top />\n        <Statement>\n          {formData.length === 0 ? (\n            <div className=\"center\">\n              <span>Não há registros de entrada ou saída</span>\n            </div>\n          ) : (\n            formData.map((r, i) => <Money money={r} key={i} />)\n          )}\n          <Total>\n            <p>Saldo</p>{\" \"}\n            <span className={userTotal >= 0 ? \"green\" : \"red\"}>\n              {userTotal}\n            </span>\n          </Total>\n        </Statement>\n        <Menu />\n      </Container>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}